<section id="projects">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <p class="h3"> The HackTrack is the official fun side of a Brainhack event, where people can work together on projects.</p>
                <p class="h3"> What projects? Any kind! From exploding brains to resource gathering and data sharing! </p>
                <br>
                <br>
                <a href="https://github.com/ohbm/hackathon2024/issues/new?assignees=sina-mansour&labels=Hackathon+Project&projects=&template=brainhack-hacktrack-project.yml&title=%3CMy+Project+Name%3E" target="_blank" class="btn btn-primary btn-xl page-scroll"> <i class="fa-brands fa-github"></i> &nbsp; Submit Projects</a>
                <hr class="primary">
                <p class="h3"> <i class="fa-solid fa-angles-down text-primary"></i> &nbsp; Explore the incredible projects submitted for this year's hackathon. <i class="fa-solid fa-angles-down text-primary"></i> &nbsp; </p>
                <br>
                <br>
                
                {% if site.data.projects.projectlist.size < 0 %}
                    <br>.
                    <br>.
                    <br>.
                    <p class="h3"> <i class="fa-solid fa-hourglass-start text-primary"></i> &nbsp; Be patient, this emptiness will soon be filled with many amazing HackTrack projects. <i class="fa-solid fa-hourglass-start text-primary"></i> &nbsp; </p>
                    <div class="col-lg-8 col-lg-offset-2" style="margin-top: 50px;">
                        <img class="img-responsive" src="{{ site.baseurl }}/img/empty-projects.jpg" alt="Hackathon Projects">
                    </div>
                {% else %}
                
                    <div id="hackathon-container">
                    {% for project in site.data.projects.projectlist %}
                    {% assign check = forloop.index0 | modulo:2 %}
                    <div class="hackathon-row col-lg-6">
                        <div class="hackathon-project-card">
                            <a href="https://github.com/ohbm/hackathon2024/issues/{{ project.issue }}" target="_blank">
                                <div class="hackathon-img-wrapper animated hiding">
                                    <img class="img-responsive" src="{{ site.baseurl }}/img/hackathon/{{ project.image }}" alt="Hackathon">
                                </div>
                            </a>
                            <div class="hackathon-details animated hiding">
                                <a href="https://github.com/ohbm/hackathon2024/issues/{{ project.issue }}" target="_blank">
                                    <div class="hackathon-project-title"><h4>{{ project.title }}</h4></div>
                                </a>
                                <p class="btn btn-primary reveal-button"><i class="fa-solid fa-magnifying-glass"></i> Project details</p>
                                <br>
                                <br>
                                {% for tag in project.categories %}
                                    <p class="btn project-tag">{{ tag }}</p>
                                {% endfor %}
                                <div class="hackathon-hidden-details">
                                    <div class="hackathon-hidden-info">
                                        <p class="text-primary collapse-button">Ã—</p>
                                        <p class="h3">{{ project.title }}</p>
                                        <div class="hackathon-project-detail">
                                            {{ project.details | markdownify }}
                                            <br>
                                            <a href="https://github.com/ohbm/hackathon2024/issues/{{ project.issue }}" target="_blank">
                                                <p class="btn btn-primary"><i class="fa-brands fa-github"></i> GitHub issue </p>
                                            </a>
                                            <a href="{{ project.link }}" target="_blank">
                                                <p class="btn btn-primary"><i class="fa-solid fa-link"></i> Project URL </p>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    </div>

                {% endif %}
            </div>
        </div>
    </div>
</section>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        var wrappers = document.querySelectorAll('.hackathon-row');

        wrappers.forEach(function(wrapper) {
            var button = wrapper.querySelector('.reveal-button');
            var content = wrapper.querySelector('.hackathon-hidden-details');
            var collapse = wrapper.querySelector('.collapse-button');

            button.addEventListener('click', function() {
                content.classList.add('active');
            });

            collapse.addEventListener('click', function() {
                content.classList.remove('active');
            });
        });
    });
    
    document.addEventListener("DOMContentLoaded", function() {
        var container = document.getElementById("hackathon-container");
        var boxes = Array.from(container.children);
        shuffle(boxes);
        boxes.forEach(function(box) {
            container.appendChild(box);
        });
    });

    // Function to shuffle an array
    function shuffle(array) {
        for (var i = array.length - 1; i > 0; i--) {
            var j = Math.floor(Math.random() * (i + 1));
            var temp = array[i];
            array[i] = array[j];
            array[j] = temp;
        }
        return array;
    }
</script>
